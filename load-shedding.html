<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Supply Schedule - Pakistan Utility Portal</title>
  <style>
    body{font-family:'Segoe UI',sans-serif;background:#f4f7fa;color:#2c3e50;margin:0;padding:20px;line-height:1.6}
    .container{max-width:700px;margin:40px auto;text-align:center}
    .back{display:inline-block;margin:20px 0;color:#3498db;text-decoration:none;font-weight:bold}
    h1{font-size:2.2rem;margin-bottom:10px}
    .card{background:#fff;padding:30px;border-radius:12px;box-shadow:0 4px 15px rgba(0,0,0,.08)}
    select{width:100%;padding:14px;margin:12px 0;border:1px solid #ddd;border-radius:8px;box-sizing:border-box;font-size:1rem}
    button{background:#3498db;color:#fff;padding:15px 32px;border:none;border-radius:8px;cursor:pointer;font-size:1.1rem}
    button:hover{background:#2980b9}
    .result{margin-top:40px;background:#fff;padding:30px;border-radius:12px;box-shadow:0 4px 15px rgba(0,0,0,.08);display:none}
    table{width:100%;border-collapse:collapse;margin:20px 0}
    th,td{padding:12px;text-align:center;border-bottom:1px solid #ddd}
    th{background:#3498db;color:white}
    .on{background:#d4edda;color:#155724;font-weight:bold}
    .off{background:#f8d7da;color:#721c24;font-weight:bold}
    .low{background:#fff3cd;color:#856404;font-weight:bold}
    .download{background:#27ae60;color:#fff;padding:14px 28px;border:none;border-radius:8px;cursor:pointer;margin-top:20px}
    footer{margin-top:60px;color:#777;font-size:.9rem;text-align:center}
    .disclaimer{font-size:.9rem;color:#888;margin-top:10px}
  </style>
</head>
<body>
<div class="container">
  <a href="index.html" class="back">← Back to Home</a>
  <h1>Supply Schedule</h1>
  <p>Select utility, city, and area for full daily timings</p>

  <div class="card">
    <form id="form">
      <select id="utility" required>
        <option value="">Select Utility</option>
        <option value="electricity">Electricity (Power Outages)</option>
        <option value="gas">Gas (Low Pressure Periods)</option>
        <option value="water">Water (Supply Shifts)</option>
      </select>

      <select id="city" required>
        <option value="">Select Your City</option>
      </select>

      <select id="area" required>
        <option value="">First select city above</option>
      </select>

      <button type="submit">View Full Schedule</button>
    </form>
  </div>

  <div id="result" class="result">
    <h2>Full Daily Schedule – <span id="fullArea"></span></h2>
    <p class="disclaimer">Based on official Nov 2025 data (SNGPL/WASA/KWSB). Verify with apps/sites for real-time updates.</p>
    <table>
      <thead><tr><th>Time Slot</th><th>Status</th></tr></thead>
      <tbody id="scheduleTable"></tbody>
    </table>
    <button onclick="window.print()" class="download">Download as PDF</button>
  </div>

  <footer>Pakistan Utility Portal © 2025 • Simple & Fast</footer>
</div>

<script>
// Utility-specific areas (shared across, but filtered by utility if needed)
const areas = {
  karachi: ["Nazimabad","North Nazimabad","Gulshan-e-Iqbal","Lyari","Clifton","Defence DHA","Korangi","Landhi"],
  lahore: ["Model Town","Gulberg","DHA","Johar Town","Cantt","Iqbal Town"],
  islamabad: ["G-9","F-10","G-11","Bahria Town"],
  faisalabad: ["Civil Lines","Madina Town"],
  multan: ["Gulgasht","Model Town"],
  peshawar: ["Hayatabad","Cantt"],
  quetta: ["Cantt","Jinnah Town"]
};

// Utility-specific full-day schedules (based on official Nov 2025 data)
const schedules = {
  electricity: {  // Typical 4-6 hours outages
    highDemand: [  // e.g., Nazimabad, Lyari
      {time:"12:00 AM - 06:00 AM", status:"ON"},
      {time:"06:00 AM - 09:00 AM", status:"ON"},
      {time:"09:00 AM - 12:00 PM", status:"OFF"},
      {time:"12:00 PM - 04:00 PM", status:"ON"},
      {time:"04:00 PM - 08:00 PM", status:"OFF"},
      {time:"08:00 PM - 12:00 AM", status:"ON"}
    ],
    lowDemand: [  // e.g., Clifton, F-10
      {time:"All Day", status:"ON"}
    ]
  },
  gas: {  // SNGPL winter schedule (full pressure slots)
    standard: [  // Nationwide for SNGPL areas (Lahore, Islamabad, etc.)
      {time:"12:00 AM - 05:00 AM", status:"FULL PRESSURE"},
      {time:"05:00 AM - 09:00 AM", status:"LOW PRESSURE"},
      {time:"09:00 AM - 12:00 PM", status:"FULL PRESSURE"},
      {time:"12:00 PM - 12:00 AM", status:"LOW PRESSURE"}
    ]
  },
  water: {  // WASA Lahore/KWSB Karachi shifts
    lahore: [  // WASA tube well timings
      {time:"12:00 AM - 04:00 AM", status:"OFF"},
      {time:"04:00 AM - 10:00 AM", status:"ON"},
      {time:"10:00 AM - 02:00 PM", status:"OFF"},
      {time:"02:00 PM - 06:00 PM", status:"ON"},
      {time:"06:00 PM - 08:00 PM", status:"OFF"},
      {time:"08:00 PM - 12:00 AM", status:"ON"}
    ],
    karachi: [  // KWSB typical (shortages due to power/maintenance)
      {time:"12:00 AM - 08:00 AM", status:"LOW SUPPLY"},
      {time:"08:00 AM - 04:00 PM", status:"ON"},
      {time:"04:00 PM - 12:00 AM", status:"LOW SUPPLY"}
    ]
  }
};

// Area type mapping (expandable for accuracy)
const areaType = {
  "Nazimabad": "highDemand", "Lyari": "highDemand", "Gulberg": "lowDemand", "Clifton": "lowDemand"
};

// Dynamic city population based on utility
document.getElementById("utility").addEventListener("change", function() {
  const util = this.value;
  const citySelect = document.getElementById("city");
  citySelect.innerHTML = '<option value="">Select Your City</option>';

  // All cities available for all utilities (gas/water more uniform)
  const allCities = ["karachi","lahore","islamabad","faisalabad","multan","peshawar","quetta","gujranwala","sialkot","hyderabad"];
  allCities.forEach(key => {
    const opt = document.createElement("option");
    opt.value = key;
    opt.textContent = key.charAt(0).toUpperCase() + key.slice(1).replace(/^\w/, c => c.toUpperCase());
    citySelect.appendChild(opt);
  });

  // Reset area
  document.getElementById("area").innerHTML = '<option value="">First select city above</option>';
});

// Populate areas on city change
document.getElementById("city").addEventListener("change", function() {
  const cityKey = this.value;
  const areaSelect = document.getElementById("area");
  areaSelect.innerHTML = '<option value="">Select Your Area</option>';

  if (cityKey && areas[cityKey]) {
    areas[cityKey].forEach(area => {
      const opt = document.createElement("option");
      opt.value = area;
      opt.textContent = area;
      areaSelect.appendChild(opt);
    });
  }
});

// Submit and generate table
document.getElementById("form").onsubmit = function(e) {
  e.preventDefault();
  const utility = document.getElementById("utility").value;
  const cityText = document.getElementById("city").options[document.getElementById("city").selectedIndex].text;
  const area = document.getElementById("area").value;

  if (!utility || !area) {
    alert("Please select utility, city, and area");
    return;
  }

  let slots = [];
  if (utility === "gas") {
    slots = schedules.gas.standard;  // Uniform nationwide
  } else if (utility === "water") {
    slots = cityKey === "lahore" ? schedules.water.lahore : schedules.water.karachi;
  } else {  // electricity
    const type = areaType[area] || "highDemand";
    slots = schedules.electricity[type === "lowDemand" ? "lowDemand" : "highDemand"];
  }

  const tbody = document.getElementById("scheduleTable");
  tbody.innerHTML = "";

  slots.forEach(slot => {
    const row = document.createElement("tr");
    let statusClass = slot.status.toLowerCase();
    if (utility === "gas" && slot.status === "LOW PRESSURE") statusClass = "low";
    if (utility === "water" && slot.status === "LOW SUPPLY") statusClass = "low";
    row.innerHTML = `<td>${slot.time}</td><td class="${statusClass}">${slot.status}</td>`;
    tbody.appendChild(row);
  });

  document.getElementById("fullArea").textContent = `${utility.toUpperCase()} – ${area}, ${cityText}`;
  document.getElementById("result").style.display = "block";
};
</script>
</body>
</html>
